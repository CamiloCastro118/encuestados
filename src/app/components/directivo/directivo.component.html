<div class="directivo-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>Panel Directivo</h3>
    </div>
    
    <nav class="sidebar-nav">
      <a 
        (click)="cambiarVista('dashboard')" 
        [class.active]="vistaActual === 'dashboard'"
        class="nav-item">
        üìä Dashboard Ejecutivo
      </a>
      <a 
        (click)="cambiarVista('reportes')" 
        [class.active]="vistaActual === 'reportes'"
        class="nav-item">
        üìã Reportes
      </a>
      <a 
        (click)="cambiarVista('metricas')" 
        [class.active]="vistaActual === 'metricas'"
        class="nav-item">
        üìà M√©tricas por √Årea
      </a>
      <a 
        (click)="cambiarVista('configuracion')" 
        [class.active]="vistaActual === 'configuracion'"
        class="nav-item">
        ‚öôÔ∏è Configuraci√≥n
      </a>
    </nav>
    
    <div class="sidebar-footer">
      <button class="nav-button" (click)="navegarAEncuestas()">Ver Encuestas</button>
      <button class="nav-button" (click)="navegarAAdmin()">Panel Admin</button>
    </div>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    
    <!-- Dashboard Ejecutivo -->
    <div *ngIf="vistaActual === 'dashboard'" class="dashboard">
      <div class="dashboard-header">
        <h2>Dashboard Ejecutivo</h2>
        <div class="ultima-actualizacion">
          √öltima actualizaci√≥n: {{ resumenEjecutivo.ultimaActualizacion | date:'dd/MM/yyyy HH:mm' }}
        </div>
      </div>
      
      <!-- Resumen Ejecutivo -->
      <div class="resumen-ejecutivo">
        <div class="resumen-card principal">
          <div class="resumen-valor">{{ resumenEjecutivo.satisfaccionGeneral }}%</div>
          <div class="resumen-label">Satisfacci√≥n General</div>
          <div class="resumen-tendencia positiva">{{ resumenEjecutivo.tendenciaMensual }}</div>
        </div>
        
        <div class="resumen-card">
          <div class="resumen-valor">{{ resumenEjecutivo.totalRespuestasRecientes }}</div>
          <div class="resumen-label">Respuestas Recientes</div>
          <div class="resumen-descripcion">√öltimos 30 d√≠as</div>
        </div>
        
        <div class="resumen-card alerta">
          <div class="resumen-label">Atenci√≥n Requerida</div>
          <div class="resumen-descripcion">{{ resumenEjecutivo.indicadorCritico }}</div>
        </div>
      </div>
      
      <!-- M√©tricas por √Årea (Vista R√°pida) -->
      <div class="areas-rapido">
        <h3>M√©tricas por √Årea</h3>
        <div class="areas-grid">
          <div 
            *ngFor="let area of metricasPorArea" 
            class="area-card"
            [class]="obtenerColorSatisfaccion(area.satisfaccion)">
            <div class="area-header">
              <h4>{{ area.area }}</h4>
              <span class="tendencia-icon">{{ obtenerIconoTendencia(area.tendencia) }}</span>
            </div>
            <div class="area-satisfaccion">{{ area.satisfaccion }}%</div>
            <div class="area-respuestas">{{ area.respuestas }} respuestas</div>
          </div>
        </div>
      </div>
      
      <!-- Acciones R√°pidas -->
      <div class="acciones-rapidas">
        <h3>Acciones R√°pidas</h3>
        <div class="acciones-grid">
          <button class="accion-btn" (click)="generarReportePersonalizado()">
            üìä Generar Reporte Personalizado
          </button>
          <button class="accion-btn" (click)="cambiarVista('reportes')">
            üìã Ver Todos los Reportes
          </button>
          <button class="accion-btn" (click)="cambiarVista('metricas')">
            üìà An√°lisis Detallado
          </button>
          <button class="accion-btn" (click)="navegarAAdmin()">
            ‚öôÔ∏è Panel de Administraci√≥n
          </button>
        </div>
      </div>
    </div>

    <!-- Reportes -->
    <div *ngIf="vistaActual === 'reportes'" class="reportes-section">
      <div *ngIf="!reporteSeleccionado">
        <div class="section-header">
          <h2>Centro de Reportes</h2>
          <button class="btn-primary" (click)="generarReportePersonalizado()">
            + Generar Reporte Personalizado
          </button>
        </div>
        
        <div class="reportes-grid">
          <div *ngFor="let reporte of reportes" class="reporte-card">
            <div class="reporte-header">
              <h4>{{ reporte.titulo }}</h4>
              <span class="tipo-badge" [class]="reporte.tipo">{{ reporte.tipo }}</span>
            </div>
            
            <p class="reporte-descripcion">{{ reporte.descripcion }}</p>
            <div class="reporte-fecha">
              Generado: {{ reporte.fechaGeneracion | date:'dd/MM/yyyy HH:mm' }}
            </div>
            
            <div class="reporte-actions">
              <button class="btn-outline" (click)="verReporte(reporte)">Ver Detalles</button>
              <button class="btn-secondary" (click)="exportarReporte(reporte)">Exportar</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Detalle del Reporte -->
      <div *ngIf="reporteSeleccionado" class="reporte-detalle">
        <div class="detalle-header">
          <button class="btn-volver" (click)="cerrarReporte()">‚Üê Volver</button>
          <h3>{{ reporteSeleccionado.titulo }}</h3>
          <button class="btn-primary" (click)="exportarReporte(reporteSeleccionado)">
            üì• Exportar
          </button>
        </div>
        
        <div class="detalle-meta">
          <div><strong>Tipo:</strong> {{ reporteSeleccionado.tipo }}</div>
          <div><strong>Fecha:</strong> {{ reporteSeleccionado.fechaGeneracion | date:'dd/MM/yyyy HH:mm' }}</div>
          <div><strong>Descripci√≥n:</strong> {{ reporteSeleccionado.descripcion }}</div>
        </div>
        
        <div class="detalle-datos">
          <h4>Datos del Reporte:</h4>
          <pre>{{ reporteSeleccionado.datos | json }}</pre>
        </div>
      </div>
    </div>

    <!-- M√©tricas por √Årea -->
    <div *ngIf="vistaActual === 'metricas'" class="metricas-section">
      <div class="section-header">
        <h2>M√©tricas Detalladas por √Årea</h2>
      </div>
      
      <div class="metricas-grid">
        <div *ngFor="let metrica of metricasPorArea" class="metrica-card">
          <div class="metrica-header">
            <h3>{{ metrica.area }}</h3>
            <span class="tendencia-badge" [class]="metrica.tendencia">
              {{ obtenerIconoTendencia(metrica.tendencia) }} {{ metrica.tendencia }}
            </span>
          </div>
          
          <div class="metrica-satisfaccion">
            <div class="satisfaccion-numero" [class]="obtenerColorSatisfaccion(metrica.satisfaccion)">
              {{ metrica.satisfaccion }}%
            </div>
            <div class="satisfaccion-barra">
              <div 
                class="barra-progreso" 
                [class]="obtenerColorSatisfaccion(metrica.satisfaccion)"
                [style.width.%]="metrica.satisfaccion">
              </div>
            </div>
          </div>
          
          <div class="metrica-estadisticas">
            <div class="estadistica">
              <span class="estadistica-valor">{{ metrica.respuestas }}</span>
              <span class="estadistica-label">Respuestas</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Configuraci√≥n -->
    <div *ngIf="vistaActual === 'configuracion'" class="configuracion-section">
      <div class="section-header">
        <h2>Configuraci√≥n del Sistema</h2>
      </div>
      
      <div class="config-form">
        <h3>Preferencias de Reportes</h3>
        
        <div class="config-group">
          <label for="frecuencia">Frecuencia de Reportes Autom√°ticos</label>
          <select 
            id="frecuencia" 
            [(ngModel)]="configuracion.frecuenciaReportes" 
            class="form-control">
            <option value="diario">Diario</option>
            <option value="semanal">Semanal</option>
            <option value="mensual">Mensual</option>
            <option value="trimestral">Trimestral</option>
          </select>
        </div>
        
        <div class="config-group">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [(ngModel)]="configuracion.notificacionesEmail">
            Recibir notificaciones por email
          </label>
        </div>
        
        <div class="config-group">
          <label for="umbral">Umbral de Alerta de Satisfacci√≥n (%)</label>
          <input 
            type="number" 
            id="umbral" 
            [(ngModel)]="configuracion.umbralAlerta" 
            min="0" 
            max="100" 
            class="form-control">
        </div>
        
        <div class="config-actions">
          <button class="btn-primary" (click)="guardarConfiguracion()">
            Guardar Configuraci√≥n
          </button>
        </div>
      </div>
    </div>

  </div>
</div>